11/08/2023 11:28:09 Request starting HTTP/2 POST https://localhost:7210/api/AuthManagement/Login application/json 64
11/08/2023 11:28:09 1 candidate(s) found for the request path '"/api/AuthManagement/Login"'
11/08/2023 11:28:09 Endpoint '"P7CreateRestApi.Controllers.AuthManagementController.Login (P7CreateRestApi)"' with route pattern '"api/AuthManagement/Login"' is valid for the request path '"/api/AuthManagement/Login"'
11/08/2023 11:28:09 Request matched endpoint '"P7CreateRestApi.Controllers.AuthManagementController.Login (P7CreateRestApi)"'
11/08/2023 11:28:09 Static files was skipped as the request already matched an endpoint.
11/08/2023 11:28:09 AuthenticationScheme: "Bearer" was not authenticated.
11/08/2023 11:28:09 Executing endpoint '"P7CreateRestApi.Controllers.AuthManagementController.Login (P7CreateRestApi)"'
11/08/2023 11:28:09 Route matched with "{action = \"Login\", controller = \"AuthManagement\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest)" on controller "P7CreateRestApi.Controllers.AuthManagementController" ("P7CreateRestApi").
11/08/2023 11:28:09 Execution plan of "authorization" filters (in the following order): ["None"]
11/08/2023 11:28:09 Execution plan of "resource" filters (in the following order): ["None"]
11/08/2023 11:28:09 Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
11/08/2023 11:28:09 Execution plan of "exception" filters (in the following order): ["None"]
11/08/2023 11:28:09 Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
11/08/2023 11:28:09 Executing controller factory for controller "P7CreateRestApi.Controllers.AuthManagementController" ("P7CreateRestApi")
11/08/2023 11:28:09 An 'IServiceProvider' was created for internal use by Entity Framework.
11/08/2023 11:28:09 Executed controller factory for controller "P7CreateRestApi.Controllers.AuthManagementController" ("P7CreateRestApi")
11/08/2023 11:28:09 Attempting to bind parameter '"user"' of type '"P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest"' ...
11/08/2023 11:28:09 Attempting to bind parameter '"user"' of type '"P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest"' using the name '""' in request data ...
11/08/2023 11:28:09 Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
11/08/2023 11:28:09 Connection id ""0HMV08LAPP5PU"", Request id ""0HMV08LAPP5PU:00000009"": started reading request body.
11/08/2023 11:28:09 Connection id ""0HMV08LAPP5PU"", Request id ""0HMV08LAPP5PU:00000009"": done reading request body.
11/08/2023 11:28:09 JSON input formatter succeeded, deserializing to type '"P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest"'
11/08/2023 11:28:09 Done attempting to bind parameter '"user"' of type '"P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest"'.
11/08/2023 11:28:09 Done attempting to bind parameter '"user"' of type '"P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest"'.
11/08/2023 11:28:09 Attempting to validate the bound parameter '"user"' of type '"P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest"' ...
11/08/2023 11:28:09 Done attempting to validate the bound parameter '"user"' of type '"P7CreateRestApi.Domain.DTOS.Requests.UserLoginRequest"'.
11/08/2023 11:28:09 Executing action method "P7CreateRestApi.Controllers.AuthManagementController.Login (P7CreateRestApi)" - Validation state: Valid
11/08/2023 11:28:10 The index "{'UserId'}" was not created on entity type '"IdentityUserRole<string>"' as the properties are already covered by the index "{'UserId', 'RoleId'}".
11/08/2023 11:28:10 The index "{'UserId'}" was not created on entity type '"IdentityUserToken<string>"' as the properties are already covered by the index "{'UserId', 'LoginProvider', 'Name'}".
11/08/2023 11:28:10 Entity Framework Core "7.0.10" initialized '"UsersDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"7.0.10"' with options: "None"
11/08/2023 11:28:10 Compiling query expression: "
"'"DbSet<IdentityUser>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)"'
11/08/2023 11:28:10 Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdentityUser>(
    asyncEnumerable: new SingleQueryingEnumerable<IdentityUser>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdentityUser.Id (string) Required PK AfterSave:Throw, 0], [Property: IdentityUser.AccessFailedCount (int) Required, 1], [Property: IdentityUser.ConcurrencyStamp (string) Concurrency, 2], [Property: IdentityUser.Email (string) MaxLength(256), 3], [Property: IdentityUser.EmailConfirmed (bool) Required, 4], [Property: IdentityUser.LockoutEnabled (bool) Required, 5], [Property: IdentityUser.LockoutEnd (DateTimeOffset?), 6], [Property: IdentityUser.NormalizedEmail (string) Index MaxLength(256), 7], [Property: IdentityUser.NormalizedUserName (string) Index MaxLength(256), 8], [Property: IdentityUser.PasswordHash (string), 9], [Property: IdentityUser.PhoneNumber (string), 10], [Property: IdentityUser.PhoneNumberConfirmed (bool) Required, 11], [Property: IdentityUser.SecurityStamp (string), 12], [Property: IdentityUser.TwoFactorEnabled (bool) Required, 13], [Property: IdentityUser.UserName (string) MaxLength(256), 14] }
            SELECT TOP(2) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.Email, a.EmailConfirmed, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdentityUser>, 
        P7CreateRestApi.Data.UsersDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)"'
11/08/2023 11:28:10 Creating DbCommand for '"ExecuteReader"'.
11/08/2023 11:28:10 Creating DbConnection.
11/08/2023 11:28:11 Created DbConnection. (30ms).
11/08/2023 11:28:11 Created DbCommand for '"ExecuteReader"' (44ms).
11/08/2023 11:28:11 Initialized DbCommand for '"ExecuteReader"' (55ms).
11/08/2023 11:28:11 Opening connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 Opened connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0"
11/08/2023 11:28:12 Executed DbCommand ("79"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0"
11/08/2023 11:28:12 Context '"UsersDbContext"' started tracking '"IdentityUser"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
11/08/2023 11:28:12 Closing data reader to '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 A data reader for '"Users"' on server '"(localdb)\mssqllocaldb"' is being disposed after spending 95ms reading results.
11/08/2023 11:28:12 Closing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 Closed connection to database '"Users"' on server '"(localdb)\mssqllocaldb"' (8ms).
11/08/2023 11:28:12 Compiling query expression: "
"'"DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)"'
11/08/2023 11:28:12 Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    P7CreateRestApi.Data.UsersDbContext, 
    False, 
    False, 
    True
)"'
11/08/2023 11:28:12 Creating DbCommand for '"ExecuteReader"'.
11/08/2023 11:28:12 Created DbCommand for '"ExecuteReader"' (0ms).
11/08/2023 11:28:12 Initialized DbCommand for '"ExecuteReader"' (0ms).
11/08/2023 11:28:12 Opening connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 Opened connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 Executing DbCommand [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0"
11/08/2023 11:28:12 Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0"
11/08/2023 11:28:12 Closing data reader to '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 A data reader for '"Users"' on server '"(localdb)\mssqllocaldb"' is being disposed after spending 0ms reading results.
11/08/2023 11:28:12 Closing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 Closed connection to database '"Users"' on server '"(localdb)\mssqllocaldb"' (0ms).
11/08/2023 11:28:12 Executed action method "P7CreateRestApi.Controllers.AuthManagementController.Login (P7CreateRestApi)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 3104.4672ms.
11/08/2023 11:28:12 List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
11/08/2023 11:28:12 No information found on request to perform content negotiation.
11/08/2023 11:28:12 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
11/08/2023 11:28:12 Attempting to select the first formatter in the output formatters list which can write the result.
11/08/2023 11:28:12 Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
11/08/2023 11:28:12 Executing "OkObjectResult", writing value of type '"P7CreateRestApi.Domain.DTOS.Responses.RegistrationResponse"'.
11/08/2023 11:28:12 Executed action "P7CreateRestApi.Controllers.AuthManagementController.Login (P7CreateRestApi)" in 3405.9842ms
11/08/2023 11:28:12 Executed endpoint '"P7CreateRestApi.Controllers.AuthManagementController.Login (P7CreateRestApi)"'
11/08/2023 11:28:12 HTTP "POST" "/api/AuthManagement/Login" responded 200 in 3516.6936 ms
11/08/2023 11:28:12 '"UsersDbContext"' disposed.
11/08/2023 11:28:12 Disposing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/08/2023 11:28:12 Disposed connection to database '""' on server '""' (1ms).
11/08/2023 11:28:12 Request finished HTTP/2 POST https://localhost:7210/api/AuthManagement/Login application/json 64 - 200 - application/json;+charset=utf-8 3548.1867ms
11/08/2023 11:28:36 Request starting HTTP/2 POST https://localhost:7210/api/UsersTests/Administrator - 0
11/08/2023 11:28:36 1 candidate(s) found for the request path '"/api/UsersTests/Administrator"'
11/08/2023 11:28:36 Endpoint '"P7CreateRestApi.Controllers.UsersTestsController.GetAdmin (P7CreateRestApi)"' with route pattern '"api/UsersTests/Administrator"' is valid for the request path '"/api/UsersTests/Administrator"'
11/08/2023 11:28:36 Request matched endpoint '"P7CreateRestApi.Controllers.UsersTestsController.GetAdmin (P7CreateRestApi)"'
11/08/2023 11:28:36 Static files was skipped as the request already matched an endpoint.
11/08/2023 11:28:36 Successfully validated the token.
11/08/2023 11:28:36 AuthenticationScheme: "Bearer" was successfully authenticated.
11/08/2023 11:28:36 Authorization was successful.
11/08/2023 11:28:36 Executing endpoint '"P7CreateRestApi.Controllers.UsersTestsController.GetAdmin (P7CreateRestApi)"'
11/08/2023 11:28:36 Route matched with "{action = \"GetAdmin\", controller = \"UsersTests\"}". Executing controller action with signature "System.String GetAdmin()" on controller "P7CreateRestApi.Controllers.UsersTestsController" ("P7CreateRestApi").
11/08/2023 11:28:36 Execution plan of "authorization" filters (in the following order): ["None"]
11/08/2023 11:28:36 Execution plan of "resource" filters (in the following order): ["None"]
11/08/2023 11:28:36 Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
11/08/2023 11:28:36 Execution plan of "exception" filters (in the following order): ["None"]
11/08/2023 11:28:36 Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
11/08/2023 11:28:36 Executing controller factory for controller "P7CreateRestApi.Controllers.UsersTestsController" ("P7CreateRestApi")
11/08/2023 11:28:36 Executed controller factory for controller "P7CreateRestApi.Controllers.UsersTestsController" ("P7CreateRestApi")
11/08/2023 11:28:36 Executing action method "P7CreateRestApi.Controllers.UsersTestsController.GetAdmin (P7CreateRestApi)" - Validation state: Valid
11/08/2023 11:28:36 Executed action method "P7CreateRestApi.Controllers.UsersTestsController.GetAdmin (P7CreateRestApi)", returned result "Microsoft.AspNetCore.Mvc.ObjectResult" in 0.2372ms.
11/08/2023 11:28:36 List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
11/08/2023 11:28:36 Attempting to select an output formatter based on Accept header '["text/plain"]'.
11/08/2023 11:28:36 Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter"' and content type '"text/plain"' to write the response.
11/08/2023 11:28:36 Executing "ObjectResult", writing value of type '"System.String"'.
11/08/2023 11:28:36 Executed action "P7CreateRestApi.Controllers.UsersTestsController.GetAdmin (P7CreateRestApi)" in 14.1565ms
11/08/2023 11:28:36 Executed endpoint '"P7CreateRestApi.Controllers.UsersTestsController.GetAdmin (P7CreateRestApi)"'
11/08/2023 11:28:36 HTTP "POST" "/api/UsersTests/Administrator" responded 200 in 93.3811 ms
11/08/2023 11:28:36 Request finished HTTP/2 POST https://localhost:7210/api/UsersTests/Administrator - 0 - 200 - text/plain;+charset=utf-8 105.1891ms
