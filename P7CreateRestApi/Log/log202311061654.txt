11/06/2023 16:54:26 Request starting HTTP/2 GET https://localhost:7210/api/Setup/GetUserRoles?email=sponge%40email.com - -
11/06/2023 16:54:26 1 candidate(s) found for the request path '"/api/Setup/GetUserRoles"'
11/06/2023 16:54:26 Endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"' with route pattern '"api/Setup/GetUserRoles"' is valid for the request path '"/api/Setup/GetUserRoles"'
11/06/2023 16:54:26 Request matched endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"'
11/06/2023 16:54:26 Static files was skipped as the request already matched an endpoint.
11/06/2023 16:54:26 Successfully validated the token.
11/06/2023 16:54:26 AuthenticationScheme: "Bearer" was successfully authenticated.
11/06/2023 16:54:26 Executing endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"'
11/06/2023 16:54:26 Route matched with "{action = \"GetUserRoles\", controller = \"Setup\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserRoles(System.String)" on controller "P7CreateRestApi.Controllers.SetupController" ("P7CreateRestApi").
11/06/2023 16:54:26 Execution plan of "authorization" filters (in the following order): ["None"]
11/06/2023 16:54:26 Execution plan of "resource" filters (in the following order): ["None"]
11/06/2023 16:54:26 Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
11/06/2023 16:54:26 Execution plan of "exception" filters (in the following order): ["None"]
11/06/2023 16:54:26 Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
11/06/2023 16:54:26 Executing controller factory for controller "P7CreateRestApi.Controllers.SetupController" ("P7CreateRestApi")
11/06/2023 16:54:26 Executed controller factory for controller "P7CreateRestApi.Controllers.SetupController" ("P7CreateRestApi")
11/06/2023 16:54:26 Attempting to bind parameter '"email"' of type '"System.String"' ...
11/06/2023 16:54:26 Attempting to bind parameter '"email"' of type '"System.String"' using the name '"email"' in request data ...
11/06/2023 16:54:26 Done attempting to bind parameter '"email"' of type '"System.String"'.
11/06/2023 16:54:26 Done attempting to bind parameter '"email"' of type '"System.String"'.
11/06/2023 16:54:26 Attempting to validate the bound parameter '"email"' of type '"System.String"' ...
11/06/2023 16:54:26 Done attempting to validate the bound parameter '"email"' of type '"System.String"'.
11/06/2023 16:54:26 Executing action method "P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)" - Validation state: Valid
11/06/2023 16:54:26 Entity Framework Core "7.0.10" initialized '"UsersDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"7.0.10"' with options: "None"
11/06/2023 16:54:26 Creating DbCommand for '"ExecuteReader"'.
11/06/2023 16:54:26 Creating DbConnection.
11/06/2023 16:54:26 Created DbConnection. (0ms).
11/06/2023 16:54:26 Created DbCommand for '"ExecuteReader"' (0ms).
11/06/2023 16:54:26 Initialized DbCommand for '"ExecuteReader"' (0ms).
11/06/2023 16:54:26 Opening connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:26 Opened connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:26 Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0"
11/06/2023 16:54:26 Executed DbCommand ("5"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0"
11/06/2023 16:54:26 Closing data reader to '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:26 A data reader for '"Users"' on server '"(localdb)\mssqllocaldb"' is being disposed after spending 0ms reading results.
11/06/2023 16:54:26 Closing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:26 Closed connection to database '"Users"' on server '"(localdb)\mssqllocaldb"' (0ms).
11/06/2023 16:54:26 L'utilisateur sponge@email.com n'existe pas
11/06/2023 16:54:26 Executed action method "P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)", returned result "Microsoft.AspNetCore.Mvc.BadRequestObjectResult" in 36.8726ms.
11/06/2023 16:54:26 List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
11/06/2023 16:54:26 No information found on request to perform content negotiation.
11/06/2023 16:54:26 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
11/06/2023 16:54:26 Attempting to select the first formatter in the output formatters list which can write the result.
11/06/2023 16:54:26 Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
11/06/2023 16:54:26 Executing "BadRequestObjectResult", writing value of type '"<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
11/06/2023 16:54:26 Executed action "P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)" in 90.3087ms
11/06/2023 16:54:26 Executed endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"'
11/06/2023 16:54:26 HTTP "GET" "/api/Setup/GetUserRoles" responded 400 in 93.4628 ms
11/06/2023 16:54:26 '"UsersDbContext"' disposed.
11/06/2023 16:54:26 Disposing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:26 Disposed connection to database '""' on server '""' (0ms).
11/06/2023 16:54:26 Request finished HTTP/2 GET https://localhost:7210/api/Setup/GetUserRoles?email=sponge%40email.com - - - 400 - application/json;+charset=utf-8 112.5178ms
11/06/2023 16:54:50 Request starting HTTP/2 GET https://localhost:7210/api/Setup/GetUserRoles?email=sponge%40example.com - -
11/06/2023 16:54:50 1 candidate(s) found for the request path '"/api/Setup/GetUserRoles"'
11/06/2023 16:54:50 Endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"' with route pattern '"api/Setup/GetUserRoles"' is valid for the request path '"/api/Setup/GetUserRoles"'
11/06/2023 16:54:50 Request matched endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"'
11/06/2023 16:54:50 Static files was skipped as the request already matched an endpoint.
11/06/2023 16:54:50 Successfully validated the token.
11/06/2023 16:54:50 AuthenticationScheme: "Bearer" was successfully authenticated.
11/06/2023 16:54:50 Executing endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"'
11/06/2023 16:54:50 Route matched with "{action = \"GetUserRoles\", controller = \"Setup\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserRoles(System.String)" on controller "P7CreateRestApi.Controllers.SetupController" ("P7CreateRestApi").
11/06/2023 16:54:50 Execution plan of "authorization" filters (in the following order): ["None"]
11/06/2023 16:54:50 Execution plan of "resource" filters (in the following order): ["None"]
11/06/2023 16:54:50 Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
11/06/2023 16:54:50 Execution plan of "exception" filters (in the following order): ["None"]
11/06/2023 16:54:50 Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
11/06/2023 16:54:50 Executing controller factory for controller "P7CreateRestApi.Controllers.SetupController" ("P7CreateRestApi")
11/06/2023 16:54:50 Executed controller factory for controller "P7CreateRestApi.Controllers.SetupController" ("P7CreateRestApi")
11/06/2023 16:54:50 Attempting to bind parameter '"email"' of type '"System.String"' ...
11/06/2023 16:54:50 Attempting to bind parameter '"email"' of type '"System.String"' using the name '"email"' in request data ...
11/06/2023 16:54:50 Done attempting to bind parameter '"email"' of type '"System.String"'.
11/06/2023 16:54:50 Done attempting to bind parameter '"email"' of type '"System.String"'.
11/06/2023 16:54:50 Attempting to validate the bound parameter '"email"' of type '"System.String"' ...
11/06/2023 16:54:50 Done attempting to validate the bound parameter '"email"' of type '"System.String"'.
11/06/2023 16:54:50 Executing action method "P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)" - Validation state: Valid
11/06/2023 16:54:50 Entity Framework Core "7.0.10" initialized '"UsersDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"7.0.10"' with options: "None"
11/06/2023 16:54:50 Creating DbCommand for '"ExecuteReader"'.
11/06/2023 16:54:50 Creating DbConnection.
11/06/2023 16:54:50 Created DbConnection. (0ms).
11/06/2023 16:54:50 Created DbCommand for '"ExecuteReader"' (0ms).
11/06/2023 16:54:50 Initialized DbCommand for '"ExecuteReader"' (0ms).
11/06/2023 16:54:50 Opening connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 Opened connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 Executing DbCommand [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0"
11/06/2023 16:54:50 Executed DbCommand ("2"ms) [Parameters=["@__normalizedEmail_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0"
11/06/2023 16:54:50 Context '"UsersDbContext"' started tracking '"IdentityUser"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
11/06/2023 16:54:50 Closing data reader to '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 A data reader for '"Users"' on server '"(localdb)\mssqllocaldb"' is being disposed after spending 26ms reading results.
11/06/2023 16:54:50 Closing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 Closed connection to database '"Users"' on server '"(localdb)\mssqllocaldb"' (0ms).
11/06/2023 16:54:50 Compiling query expression: "
"'"DbSet<IdentityUserRole<string>>()
    .Join(
        inner: DbSet<IdentityRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)"'
11/06/2023 16:54:50 Generated query execution expression: "
"'"queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    P7CreateRestApi.Data.UsersDbContext, 
    False, 
    False, 
    True
)"'
11/06/2023 16:54:50 Creating DbCommand for '"ExecuteReader"'.
11/06/2023 16:54:50 Created DbCommand for '"ExecuteReader"' (0ms).
11/06/2023 16:54:50 Initialized DbCommand for '"ExecuteReader"' (0ms).
11/06/2023 16:54:50 Opening connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 Opened connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 Executing DbCommand [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0"
11/06/2023 16:54:50 Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0"
11/06/2023 16:54:50 Closing data reader to '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 A data reader for '"Users"' on server '"(localdb)\mssqllocaldb"' is being disposed after spending 6ms reading results.
11/06/2023 16:54:50 Closing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 Closed connection to database '"Users"' on server '"(localdb)\mssqllocaldb"' (0ms).
11/06/2023 16:54:50 Executed action method "P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 106.9826ms.
11/06/2023 16:54:50 List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
11/06/2023 16:54:50 No information found on request to perform content negotiation.
11/06/2023 16:54:50 Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
11/06/2023 16:54:50 Attempting to select the first formatter in the output formatters list which can write the result.
11/06/2023 16:54:50 Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
11/06/2023 16:54:50 Executing "OkObjectResult", writing value of type '"System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'.
11/06/2023 16:54:50 Executed action "P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)" in 121.0305ms
11/06/2023 16:54:50 Executed endpoint '"P7CreateRestApi.Controllers.SetupController.GetUserRoles (P7CreateRestApi)"'
11/06/2023 16:54:50 HTTP "GET" "/api/Setup/GetUserRoles" responded 200 in 121.6681 ms
11/06/2023 16:54:50 '"UsersDbContext"' disposed.
11/06/2023 16:54:50 Disposing connection to database '"Users"' on server '"(localdb)\mssqllocaldb"'.
11/06/2023 16:54:50 Disposed connection to database '""' on server '""' (0ms).
11/06/2023 16:54:50 Request finished HTTP/2 GET https://localhost:7210/api/Setup/GetUserRoles?email=sponge%40example.com - - - 200 - application/json;+charset=utf-8 144.8847ms
